<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSE Results Calendar - Quarterly Results Today</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
        h1 { text-align: center; color: #444; }
        .company-title { margin: 10px 0; font-size: 18px; font-weight: bold; color: #333; }
        .company-container { display: flex; flex-direction: column; gap: 20px; }
        .company { border: 1px solid #ddd; padding: 10px; background: white; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ddd; padding: 6px; text-align: center; }
        th { background: #4CAF50; color: #fff; }
        tr:nth-child(even) { background: #f2f2f2; }
        #pagination { text-align: center; margin: 20px 0; }
        #pagination button { margin: 0 5px; padding: 8px 12px; background: #4CAF50; color: #fff; border: none; cursor: pointer; }
        #pagination button:hover { background: #45a049; }
        #pagination button:disabled { background: #ccc; cursor: not-allowed; }
    </style>
</head>
<body>
    <h1>NSE Results Calendar - Quarterly Results Today</h1>
    <div id="results"></div>

    <script>
        const itemsPerPage = 10; // Updated to 10 companies per page
        let companies = [], currentPage = 1;

        async function loadResults() {
            const response = await fetch('results.txt');
            const data = await response.text();
            parseData(data);
            displayResults();
        }

        function parseData(data) {
            const lines = data.trim().split('\n');
            let currentCompany = null;

            lines.forEach(line => {
                if (!line.includes('\t')) {
                    if (currentCompany) companies.push(currentCompany);
                    currentCompany = { name: line.trim(), headers: [], rows: [] };
                } else if (!currentCompany.headers.length) {
                    currentCompany.headers = line.trim().split('\t');
                } else {
                    currentCompany.rows.push(line.trim().split('\t'));
                }
            });
            if (currentCompany) companies.push(currentCompany);
        }

        function displayResults() {
            const container = document.getElementById('results');
            container.innerHTML = '';

            // Pagination: Get the companies for the current page
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const paginatedCompanies = companies.slice(start, end);

            const companyContainer = document.createElement('div');
            companyContainer.className = 'company-container';

            // Display the companies in a vertical layout
            paginatedCompanies.forEach(company => {
                const companyDiv = document.createElement('div');
                companyDiv.className = 'company';

                const title = document.createElement('div');
                title.className = 'company-title';
                title.textContent = company.name;
                companyDiv.appendChild(title);

                const table = document.createElement('table');
                const headers = company.headers.map(header => `<th>${header}</th>`).join('');
                table.innerHTML = `<tr>${headers}</tr>` + company.rows.map(row =>
                    `<tr>${row.map(cell => `<td>${cell}</td>`).join('')}</tr>`).join('');
                companyDiv.appendChild(table);

                companyContainer.appendChild(companyDiv);
            });

            container.appendChild(companyContainer);
            displayPagination();
        }

        function displayPagination() {
            const pagination = document.createElement('div');
            pagination.id = 'pagination';
            const totalPages = Math.ceil(companies.length / itemsPerPage);

            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.disabled = i === currentPage;
                button.onclick = () => { currentPage = i; displayResults(); };
                pagination.appendChild(button);
            }

            document.getElementById('results').appendChild(pagination);
        }

        loadResults();
    </script>
    <script>
        // Disable right-click
        document.addEventListener("contextmenu", function(event) {
            event.preventDefault();
        });
    </script>
</body>
</html>
